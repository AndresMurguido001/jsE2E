#! /usr/local/bin/bash
echo "Creating order in $API_URL";
echo
DATE=$(printf '%x\n' $(date +%s))

case $1 in 
    MAILAWAY )
         
        EMAIL=$EMAIL_BASE+PR${DATE}MA@govworks.com
        echo
        run core/createorder passport-renewal standard $EMAIL
        echo "Created passport renewal order for $EMAIL, smart shipping (Mailaway)"
        echo -n "Would  you like to fill out the users profile? (y/n): "
        read RESPONSE
        if [ $RESPONSE == "y" ];
        then
            echo "Ok, generating profile"
            run core/fillapp $EMAIL
        fi
        ;;
    AUTO )
        EMAIL=$EMAIL_BASE+PR${DATE}NM@govworks.com
        echo
        run core/createorder new-passport standard $EMAIL passportcenter
        echo "Created new passport order for $EMAIL, rush shipping (Automanifest)"
        echo -n "Would  you like to fill out the users profile? (y/n): "
        read RESPONSE
        if [ $RESPONSE == "y" ];
        then
            echo "Ok, generating profile"
            run core/fillapp $EMAIL
        fi
        ;;
    TRIAL )
        EMAIL=$EMAIL_BASE+PR${DATE}NM@govworks.com
        echo "New passport trial with rush shipping (Automanifest)"
        echo
        run core/createtrial new-passport rush $EMAIL
        echo -n "Would  you like to fill out the users profile? (y/n): "
        read RESPONSE
        if [ $RESPONSE == "y" ];
        then
            echo "Ok, generating profile"
            run core/fillapp $EMAIL
        fi
        ;;
    e2e )
        echo "Running E2E for you, sit back and relax"
        echo "At the moment this script only creates an mailaway order in portal"
        cd ~/gw/gov-portal/tests/E2E-Testing && npm i | npm run update | npm run server
        cd ~/gw/gov-portal/tests/E2E-Testing && npm run mailaway
        ;;
    * ) 
        echo "Bad argument, right now you could only type one of the following options: MAILAWAY, AUTO, E2E";;
esac


