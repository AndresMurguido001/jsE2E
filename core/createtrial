#! /usr/local/bin/bash

# Parameters: product-type expediting_option [email] [passportrenewal]

# Check for required params
echo "${1:?Must provide a product}" > /dev/null
echo "${2:?Must provide an expediting option}" > /dev/null

# product option email source
email=${3:-$(random_email)}
run core/createlead $1 $2 $email $4

UUID=$(get_lead_uuid "$email" | sed -E "s/\"//g" | sed -E "s/uuid//g" | sed -E "/^$/d");
api_call "https://api.dev.govworks.com/api/trial/$UUID" '' "GET" #Hit this endpoint to start the trial

set_user_password_to_password $email;

echo "Create Trial: Trial Created, Login with: $(purple "$email")"